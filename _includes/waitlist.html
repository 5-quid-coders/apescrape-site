<div id="waitlist" class="flex flex-col w-full rounded-[10px] w-full sm:w-max flex shrink-0 flex-col gap-1">
    <p class="mx-auto font-bold [font-size:var(--h5)] mb-[18px]">Join the waitlist</p>
    <input class="mx-auto input max-w-[225px]" type="text" id="name" placeholder="Name">
    <input class="mx-auto input max-w-[225px]" type="email" id="email" placeholder="Email">
    <button id="btn" class="mx-auto w-full btn mt-1 bg-[#2f27ce] text-[#fbfbfe] max-w-[225px]">Submit</button>
    <div id="message" class="mx-auto"></div>
</div>

<script>
    const btn = document.getElementById('btn');
    const msg = document.getElementById('message');

    btn.onclick = async () => {
        btn.disabled = true;
        btn.textContent = 'Submitting...';

        try {
            const res = await fetch('https://dashboard.apescrape.com/auth/waitlist/', { /* Replace with actual server URL */ /* https://apescrape.com/auth/waitlist/ */
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value
                })
            });

            const data = await res.json();
            msg.textContent = data.success ? 'Success' : data.error;

            if (data.success) {
                document.getElementById('name').value = '';
                document.getElementById('email').value = '';
            }
        } catch {
            msg.textContent = 'Connection error';
            msg.className = 'error';
        }

        btn.disabled = false;
        btn.textContent = 'Submit';
    };
</script>